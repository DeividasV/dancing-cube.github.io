<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="page-title">Loading Exhibition...</title>
    <meta
      name="description"
      content="Interactive 3D exhibition from Dancing Cube"
    />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../../favicon.ico" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="../../assets/images/favicon.svg"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../../assets/images/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../../assets/images/favicon-16x16.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../../assets/images/apple-touch-icon.png"
    />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="../../src/css/exhibition-framework.css" />
  </head>
  <body>
    <!-- App Container -->
    <div id="app" class="app-container">
      <!-- Top Menu -->
      <nav class="top-menu">
        <div class="nav-left">
          <a
            href="../../index.html"
            class="logo"
            title="Return to Exhibition Gallery"
          >
            D4NC1NG_CUB3S
          </a>
          <div class="menu-title" id="exhibition-title">Loading...</div>
        </div>
        <div class="nav-right">
          <button
            class="nav-button sound-toggle-button"
            onclick="window.toggleAppSound()"
            title="Sound OFF - Click to enable"
          >
            ðŸ”‡
          </button>
          <button class="nav-button prev-button" data-nav="prev">PREV</button>
          <button class="nav-button next-button" data-nav="next">NEXT</button>
          <button class="nav-button home-button" data-nav="home">HOME</button>
        </div>
      </nav>

      <!-- Exhibition Window -->
      <div class="exhibition-window">
        <!-- Loading Animation -->
        <div class="loading-container" id="loading-screen">
          <div class="loading-spinner"></div>
          <div class="loading-text" id="loading-text">
            Loading Exhibition...
          </div>
        </div>

        <!-- Exhibition Content Area -->
        <div class="exhibition-container">
          <div class="exhibition-frame">
            <div id="container" class="exhibition-canvas"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Core Scripts -->
    <script src="../../assets/lib/three.min.js"></script>

    <!-- Exhibition Framework Core -->
    <script src="../../src/core/Exhibition.js"></script>
    <script src="../../src/core/AudioSystem.js"></script>
    <script src="../../src/legacy/exhibition-compatibility.js"></script>

    <!-- Exhibition Loader -->
    <script>
      // Auto-detect exhibition from URL and load it
      window.addEventListener("DOMContentLoaded", function () {
        const pathParts = window.location.pathname.split("/");
        const exhibitionName = pathParts[pathParts.length - 2]; // Get folder name

        // Exhibition configurations
        const exhibitions = {
          "quantum-bounce": {
            title: "QU4NTUM_B0UNC3",
            description:
              "Interactive 3D physics simulation with bouncing cubes",
            script: "quantum-bounce.js",
          },
          "fluid-dynamics": {
            title: "FLU1D_DYN4M1X",
            description: "Fluid dynamics simulation",
            script: "fluid-dynamics.js",
          },
          "wire-network": {
            title: "W1R3_N3TW0RK",
            description: "Network visualization",
            script: "wire-network.js",
          },
          // Add more exhibitions here
        };

        const config = exhibitions[exhibitionName];
        if (config) {
          // Update page title and exhibition info
          document.getElementById("page-title").textContent =
            config.title + " - Dancing Cube Exhibition";
          document.getElementById("exhibition-title").textContent =
            config.title;
          document.getElementById("loading-text").textContent =
            "Loading " + config.title + "...";

          // Load the exhibition script
          const script = document.createElement("script");
          script.src = "./" + config.script;
          script.onload = function () {
            // Hide loading screen after script loads
            setTimeout(() => {
              document.getElementById("loading-screen").style.opacity = "0";
              setTimeout(() => {
                document.getElementById("loading-screen").style.display =
                  "none";
              }, 300);
            }, 1000);
          };
          document.body.appendChild(script);
        } else {
          console.error(
            "Exhibition configuration not found for:",
            exhibitionName
          );
        }
      });
    </script>
  </body>
</html>
