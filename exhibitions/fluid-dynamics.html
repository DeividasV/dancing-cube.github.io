<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FLU1D_DYN4M1X - Dancing Cube Exhibition</title>
    <meta
      name="description"
      content="Interactive fluid dynamics simulation with particle systems and wave propagation."
    />

    <!-- Preload fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="../css/shared-navigation.css" />
    <link rel="stylesheet" href="../css/fluid-dynamics.css" />
  </head>
  <body>
    <!-- Top Navigation Menu -->
    <nav class="top-menu">
      <div class="menu-left">
        <h1 class="menu-title">FLU1D_DYN4M1X</h1>
      </div>
      <div class="menu-center">
        <div class="fluid-status">
          <span class="status-label">STATUS:</span>
          <span class="status-value" id="fluidStatus">ACTIVE</span>
        </div>
      </div>
      <div class="menu-right">
        <button class="menu-button" onclick="toggleSimulation()">
          ‚è∏Ô∏è PAUSE
        </button>
        <button class="menu-button" onclick="resetFluid()">üåä RESET</button>
        <button class="menu-button" onclick="addTurbulence()">üí® TURB</button>
        <a href="../index.html" class="back-button">‚Üê GALLERY</a>
      </div>
    </nav>

    <!-- Loading indicator -->
    <div class="loading">INITIALIZING FLU1D SY5T3M...</div>

    <!-- Main fluid container - fills remaining space -->
    <div id="container"></div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="../js/shared-controls.js"></script>
    <script src="../js/fluid-dynamics.js"></script>
    <script>
      // Global variables for fluid simulation control
      let isSimulationPaused = false;

      // Initialize after page loads
      document.addEventListener("DOMContentLoaded", () => {
        setTimeout(() => {
          // Hide loading indicator
          const loading = document.querySelector(".loading");
          if (loading) {
            loading.style.display = "none";
          }
        }, 2000);
      });

      // Function to toggle simulation
      function toggleSimulation() {
        isSimulationPaused = !isSimulationPaused;
        const statusEl = document.getElementById("fluidStatus");
        const pauseBtn = document.querySelector(".menu-button");

        if (isSimulationPaused) {
          statusEl.textContent = "PAUSED";
          pauseBtn.innerHTML = "‚ñ∂Ô∏è RESUME";
        } else {
          statusEl.textContent = "ACTIVE";
          pauseBtn.innerHTML = "‚è∏Ô∏è PAUSE";
        }

        // Call the actual fluid simulation toggle if it exists
        if (window.toggleFluidSimulation) {
          window.toggleFluidSimulation();
        }
      }

      // Function to reset fluid
      function resetFluid() {
        if (window.resetFluidSimulation) {
          window.resetFluidSimulation();
        }
        const statusEl = document.getElementById("fluidStatus");
        statusEl.textContent = "RESET";
        setTimeout(() => {
          statusEl.textContent = isSimulationPaused ? "PAUSED" : "ACTIVE";
        }, 1000);
      }

      // Function to add turbulence
      function addTurbulence() {
        if (window.addFluidTurbulence) {
          window.addFluidTurbulence();
        }
        const statusEl = document.getElementById("fluidStatus");
        statusEl.textContent = "TURBULENT";
        setTimeout(() => {
          statusEl.textContent = isSimulationPaused ? "PAUSED" : "ACTIVE";
        }, 2000);
      }
    </script>
  </body>
</html>
